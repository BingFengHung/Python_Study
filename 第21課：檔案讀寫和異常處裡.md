# 第 21 課：檔案讀寫和異常處理

實際開發過程中常常會育刀對資料進行持久化的情境，所謂持久化是指將資料從無法長久保存資料的儲存介面 (通常是記憶體) 轉移到可以長久保存資料的儲存媒介 (通常是硬碟) 中。

實現資料持久化最直接簡單的方式就是透過`檔案系統`將資料儲存到`檔案中`。

電腦的`檔案系統`是一種儲存和組織電腦數據的方法，它使得對資料的存取和查詢變得容易，檔案系統使用`檔案`和`樹狀目錄`的抽象邏輯概念代替了硬碟、光碟、快閃記憶體等物理設備的資料塊概念，使用者使用檔案系統來保存資料時，不用關心資料實際儲存在硬碟的哪個資料塊上面，只要記住這個檔案的路徑與檔案名稱。在寫入新的資料之前，使用者不用關心硬碟上的哪個資料塊沒有被使用，硬碟上的儲存空間管理 (分配和釋放) 功能由檔案系統自動完成，使用者只須記住資料被寫入到哪個檔案中。

## 開啟與關閉檔案

有檔案系統，就能夠方常方便地透過檔案來讀寫資料；在 Python 中，要實現檔案操作是非常簡單的。

使用 Python 內建的 `open` 函數來打開檔案，在使用 `open` 函數時，可以向函數的參數指定 `檔案名稱`、`操作模式`和`字元編碼`等訊息，就可以對檔案進行讀寫操作了。

這邊所說的操作模式是只要打開什麼樣的檔案 (字元檔案或二進制檔案) 以及做什麼樣的操作 (讀、寫或是追加)，具體如下表所示：

| 操作模式  | 具體含意                         |
| -------- | -------------------------------- |
| `'r'`    | 讀取 （預設）                     |
| `'w'`    | 寫入（會先截斷之前的內容）         |
| `'x'`    | 寫入，如果檔案已經存在會產生異常    |
| `'a'`    | 追加，將內容寫入到已有文件的末端    |
| `'b'`    | 二進制模式                        |
| `'t'`    | 文字模式（默認）                  |
| `'+'`    | 更新（既可以讀又可以寫）           |

下圖顯示了如何根據程式的需要來設定 `open` 函數的操作模式

下图展示了如何根据程序的需要来设置`open`函数的操作模式。

<img src="https://gitee.com/jackfrued/mypic/raw/master/20210803201644.png" width="75%">

在使用 `open` 函數時，如果開啟的檔案是字元檔案 (文字檔案)，可以透過 `encoding` 參數來指定讀寫檔案使用的字元編碼。
